<MARKDOWN>
# TRAE 智能体项目规则
## 项目概览
- **项目类型**：基于 [Python|JavaScript|Java|Go] 的 [Web后端|前端CLI工具|数据分析] 项目
- **项目名称**：[项目名称]
- **项目结构**：
├── README.md                 # 项目说明文档
├── requirements.txt          # Python依赖管理（或 package.json/pom.xml）
├── src/                     # 源代码目录
├── tests/                   # 测试文件目录
├── config/                  # 配置文件目录
├── .gitignore              # Git忽略文件
└── .trae/rules/            # TRAE规则定义

<TEXT>
## 1. 代码规范
### 1.1 通用规范
- **缩进**：使用 4 个空格，禁止使用 Tab 字符
- **编码**：文件顶部包含编码声明 `# -*- coding: utf-8 -*-`（Python项目）
- **命名约定**：
- 类名：PascalCase（如 `UserService`）
- 函数/方法名：snake_case（如 `get_user_by_id`）
- 变量名：snake_case（如 `user_list`）
- 常量名：UPPER_SNAKE_CASE（如 `MAX_RETRY_COUNT`）
### 1.2 文档要求
- 每个模块、类、函数必须包含 docstring 注释
- 复杂逻辑需添加行内注释说明
- 公共 API 接口必须提供使用示例
## 2. 代码生成规范
### 2.1 文件组织
- 新代码必须置于 `/src/` 目录下的适当模块中
- 新增文件需在回复中明确说明：
- 完整文件路径
- 文件用途说明
- 与其他模块的依赖关系
- 保持与现有代码风格的一致性
### 2.2 技术选型
- 优先使用官方推荐和社区维护良好的库
- 禁止使用已废弃或不再维护的 API
- 新技术引入需评估成熟度和维护性
## 3. 质量保证
### 3.1 测试要求
- **测试位置**：所有测试文件置于 `/tests/` 目录
- **命名规范**：测试文件名以 `test_` 开头（如 `test_user_service.py`）
- **覆盖范围**：
- 必须覆盖正常业务逻辑路径
- 必须覆盖异常和边界情况
- 关键算法需包含性能测试
- **测试质量**：测试用例应独立、可重复、有明确的断言
### 3.2 代码审查要点
- 每次生成代码前检查潜在的安全漏洞
- 验证性能瓶颈和优化可能性
- 确保错误处理机制完善
## 4. 依赖管理
### 4.1 依赖声明
- Python：在 `requirements.txt` 中精确指定版本号
- JavaScript：在 `package.json` 中管理依赖
- Java：在 `pom.xml` 中管理依赖
- 引入新依赖需说明理由和使用场景
### 4.2 导入规范
```python
# 标准库导入
import os
import sys
# 第三方库导入
import requests  # 用于 HTTP 请求处理
from sqlalchemy import create_engine  # 数据库连接管理
# 本地模块导入
from .models import User
from .utils.validators import validate_email
5. 通信规范
5.1 语言使用
技术解释优先使用中文
框架专有术语可保留英文，但需附加中文解释
示例：使用 FastAPI 的 Dependency Injection 系统（依赖注入）...
5.2 内容组织
长内容使用分段和列表展示
代码示例需标注语言类型和文件路径
重要概念使用加粗或引用块强调
6. 安全与性能
6.1 安全要求
输入验证：所有外部输入必须经过验证
SQL 注入防护：使用参数化查询或 ORM
XSS 防护：输出内容进行适当转义
认证授权：敏感操作必须验证权限
6.2 性能优化
算法选择：优先使用时间复杂度更优的算法
资源管理：及时释放数据库连接、文件句柄等资源
异步处理：耗时操作使用异步或队列处理
缓存策略：合理使用缓存减少重复计算
7. 项目架构
7.1 目录结构约定
业务逻辑：/src/services/ 目录
数据模型：/src/models/ 目录
API 接口：/src/api/ 目录
工具函数：/src/utils/ 目录
适配器层：/src/adapters/（第三方服务交互）
配置管理：/config/ 目录统一管理
7.2 模块管理
禁止随意修改 __init__.py 文件的导出结构
新增模块需考虑命名空间和导入路径
循环依赖必须避免
8. 版本控制
8.1 提交规范
<TEXT>
feat:    新功能
fix:     修复问题
docs:    文档更新
style:   代码格式调整
refactor:代码重构
test:    测试相关
chore:   构建过程或辅助工具变动
8.2 提交示例
<BASH>
feat: 添加用户认证系统
- 实现 JWT token 生成和验证
- 添加用户登录/注册 API
- 编写完整的单元测试
fix: 修复数据库连接泄漏问题
- 确保数据库连接正确关闭
- 添加连接池配置
docs: 更新 API 使用文档
- 添加认证接口说明
- 提供请求/响应示例
9. 扩展规则
9.1 环境配置
开发、测试、生产环境配置分离
敏感信息使用环境变量管理
配置文件模板需包含在版本控制中
9.2 监控与日志
关键操作添加日志记录
错误信息需包含足够上下文
性能关键路径添加监控点